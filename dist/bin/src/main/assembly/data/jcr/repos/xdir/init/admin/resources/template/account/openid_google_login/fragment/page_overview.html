<@page_overview_title/>
<#assign groovy = "org.duguo.xdir.core.internal.template.freemarker.GroovyDirective"?new()>
<@groovy>
		json=model.app.security.get("openidgoogle").requestLoginUrl(model.request,model.pagePath+"/callback"+model.format);
		model.put("json",json);
        authUrl = json.loginUrl;
        if(authUrl.isNull()){
        	return "Failed to talk to OpenID provider, please try again later.";
        }else{
	        model.response.sendRedirect(authUrl.toString());
        }
	return ""
</@groovy>
<#if !json.loginUrl.isNull()>
<#stop "redirected to login"/>
</#if>