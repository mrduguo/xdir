<@page_overview_title/>
<#assign groovy = "org.xdir.platform.core.internal.template.freemarker.GroovyDirective"?new()>
<@groovy>

//json=model.app.httpClient.httpPost("https://www.google.com/accounts/o8/ud","text","openid.ns","http://specs.openid.net/auth/2.0","openid.mode","associate","openid.session_type","no-encryption","openid.assoc_type","HMAC-SHA1");
//json=model.app.httpClient.httpPost("http://localhost:8080/xdir/index.html","text","action","putform");
		json=model.app.security.get("openidgoogle").requestLoginUrl(model.request,model.pagePath+"/callback"+model.format);
		model.put("json",json);
        authUrl = json.loginUrl;
        if(authUrl.isNull()){
        	return "Failed to talk to OpenID provider, please try again later.";
        }else{
	        model.response.sendRedirect(authUrl.toString());
        }
	return ""
</@groovy>
<#if !json.loginUrl.isNull()>
<#stop "redirected to login"/>
</#if>