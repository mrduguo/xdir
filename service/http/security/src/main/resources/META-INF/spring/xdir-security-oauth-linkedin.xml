<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
  xsi:schemaLocation="http://www.springframework.org/schema/beans   
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/util  
       http://www.springframework.org/schema/util/spring-util.xsd">

  <bean id="oauthLinkedin" class="org.duguo.xdir.security.impl.authentication.oauth.signpost.DefaultSignpostOAuthService">
    <property name="oauthProvider" ref="oauthLinkedinProvider"/>
    <property name="oauthConsumerFactoryBeanName" value="oauthLinkedinConsumer"/>    
    <property name="apiResponseFormat" value="json"/>
    <property name="httpClientService" ref="defaultHttpClientService"/>
    <property name="tokenStore" ref="sessionTokenStore"/>
    <property name="userInfoRetriver" ref="oauthLinkedinUserInfoRetriver"/>
  </bean>
  
  <bean id="oauthLinkedinUserInfoRetriver" class="org.duguo.xdir.security.impl.authentication.oauth.OauthUserInfoRetriver">
    <property name="oauthService" ref="oauthLinkedin"/>
    <property name="userInfoUrl" value="http://twitter.com/account/verify_credentials.json"/>
    <property name="userInfoMap">
    	<map>
    		<entry key="identity" value="id"/>
    		<entry key="fullName" value="name"/>
    		<entry key="userName" value="screen_name"/>
    		<entry key="image" value="profile_image_url"/>
    		<entry key="_twitter_id" value="id"/>
    	</map>
    </property>
  </bean>
  
  <bean id="oauthLinkedinProvider" class="oauth.signpost.basic.DefaultOAuthProvider">
  	<constructor-arg value="https://api.linkedin.com/uas/oauth/requestToken" />
  	<constructor-arg value="https://api.linkedin.com/uas/oauth/accessToken" />
  	<constructor-arg value="https://api.linkedin.com/uas/oauth/authorize" />
  </bean>
  
  <bean id="oauthLinkedinConsumer" class="oauth.signpost.commonshttp.CommonsHttpOAuthConsumer" scope="prototype">
  	<constructor-arg value="6CuRZomIfI08ArO_6xg67sK2aVyhvlTitGrCeFeiML0J8coOeiKXmfzLJqc88Lfd" />
  	<constructor-arg value="-0CRzm1w20QjZfwNm5kWW72K_BFhp5L0CGEH1fLlseGIiY_27lJXqFU0R9xlJggK" />
  </bean>

</beans>